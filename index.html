<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>La mia biblioteca</title>
    <style>
          
        .header-image {
           width: 100%;
           height: 200px;
           background: url('https://www.gedistatic.it/content/gedi/img/huffingtonpost/2020/05/06/092141828-6d8b7944-eed5-4bf5-a7c5-2e3c8b17879d.jpeg?webp') no-repeat center center;
           background-size: cover;
        }
        
        #campoRicerca {
            width: 30%; /* Imposta la larghezza al 100% del contenitore */
            padding: 10px; /* Aggiunge un po' di spazio interno per rendere il campo più grande */
            font-size: 16px; /* Aumenta la dimensione del testo */
            margin-bottom: 20px; /* Aggiunge spazio sotto il campo di ricerca */
        }
        
        .book-container {
            display: flex;
            background-color: #fff;
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            transition: 0.3s;
            border-radius: 5px; 
        }

        .book-info {
            flex-basis: 50%;
            align-self: flex-start;
            display: flex; /* Aggiungi questa proprietà per definire un flex container */
            flex-direction: column; /* Imposta la direzione degli elementi figli in colonna */
        }

        .book-description {
            flex-basis: 50%;
            padding-left: 20px;
            align-self: flex-start;
        }
   
        body {
        font-family: 'URW Gothic L', sans-serif;
        color: #333;
        background-color: #f8f8f8;
        }

        h1 {
            color: #5D6975;
            font-family: 'Georgia', serif;
            text-align: center;
        }

        .book-container:hover {
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
        }
        
    </style>
</head>
<body>
    <div class="header-image"></div>
    <h1>“I libri condussero alcuni alla sapienza, altri alla follia.”</h1>
    <!-- Campo di ricerca -->
    <input type="text" id="campoRicerca" onkeyup="filtraLibri()" placeholder="Cerca per autore o titolo...">
    <!-- Contenitore per tutti i libri -->
    <div id="books-container"></div>
   
    <script>
    function CaricaCatalogo() {
        var url = "https://raw.githubusercontent.com/ladylazarus88/biblio/main/books.csv"; // Percorso del file CSV sul server locale

        fetch(url)
            .then(response => response.text())
            .then(data => {
                var libri = data.split(/\r?\n/); // Divide il file CSV in righe
                var booksContainer = document.getElementById('books-container');
                booksContainer.innerHTML = ''; // Pulisce il contenitore dei libri

                libri.forEach(function (libro, index) {
                    if (index === 0) return; // Salta l'intestazione del CSV
                    var dettagliLibro = libro.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/); // Divide ogni riga in colonne, gestendo le virgolette
                    
                    // Crea un contenitore per ogni libro
                    var bookContainer = document.createElement('div');
                    bookContainer.classList.add('book-container');

                    // Estrai i dettagli del libro tenendo conto delle virgolette
                    var isbn = dettagliLibro[0];
                    var copertina = dettagliLibro[1] || 'default-cover.jpg'; // Immagine di copertina predefinita se mancante
                    var titolo = dettagliLibro[2].replace(/"/g, ''); // Rimuove le virgolette dal titolo
                    var autore = dettagliLibro[3].replace(/"/g, ''); // Rimuove le virgolette dall'autore
                    var categoria = dettagliLibro[4].replace(/"/g, ''); // Rimuove le virgolette dalla categoria
                    var dataPubblicazione = dettagliLibro[5].replace(/"/g, ''); // Rimuove le virgolette dalla data di pubblicazione
                    var descrizione = dettagliLibro[6].replace(/"/g, ''); 

                    // Formatta la data di pubblicazione per rimuovere l'ora se presente
                    dataPubblicazione = dataPubblicazione.split('T')[0];

                    // Aggiunge i dettagli del libro al contenitore
                    bookContainer.innerHTML = `
                        <h2>${titolo}</h2>
                        <p>Autore: ${autore}</p>
                        <p>Categoria: ${categoria}</p>
                        <p>Data di Pubblicazione: ${dataPubblicazione}</p>
                        <img src="${copertina}" alt="Copertina del libro: ${titolo}" />
                    `;

                    // Aggiunge il contenitore del libro al contenitore principale
                    booksContainer.appendChild(bookContainer);

                    // Crea un contenitore per i dettagli del libro
                    var bookDetails = document.createElement('div');
                    bookDetails.classList.add('book-details');
            
                    // Crea un contenitore per le informazioni del libro
                    var bookInfo = document.createElement('div');
                    bookInfo.classList.add('book-info');

                     // Crea un contenitore per la descrizione del libro
                    var bookDescription = document.createElement('div');
                    bookDescription.classList.add('book-description');
                    bookDescription.textContent = descrizione; // Aggiungi la descrizione del libro
            
                    // Aggiungi bookInfo e bookDescription a bookDetails
                    bookDetails.appendChild(bookInfo);
                    bookDetails.appendChild(bookDescription);
            
                    // Aggiungi bookDetails a bookContainer
                    bookContainer.appendChild(bookDetails);
            
                    // Aggiungi bookContainer a booksContainer
                    booksContainer.appendChild(bookContainer);
    
                        });
            })
            .catch(error => console.error('Errore nel caricamento del catalogo:', error));
    }
  function filtraLibri() {
        var input, filtro, contenitore, libri, titolo, autore, i;
        input = document.getElementById('campoRicerca');
        filtro = input.value.toUpperCase();
        contenitore = document.getElementById('books-container');
        libri = contenitore.getElementsByClassName('book-container');

        for (i = 0; i < libri.length; i++) {
            titolo = libri[i].getElementsByTagName("h2")[0];
            autore = libri[i].getElementsByTagName("p")[0];
            if (titolo.innerHTML.toUpperCase().indexOf(filtro) > -1 || autore.innerHTML.toUpperCase().indexOf(filtro) > -1) {
                libri[i].style.display = "";
            } else {
                libri[i].style.display = "none";
            }
        }
    }

    // Chiamata alla funzione al caricamento della pagina
    document.addEventListener('DOMContentLoaded', CaricaCatalogo);
    </script>
</body>
</html>

